---
import { getCollectionByName } from '@/utils/posts';
import Base from '@/layouts/Base.astro';
import { formatDate } from '@/utils/date';

const posts = await getCollectionByName();
---

<Base>
  <div>
    <h3>Posts</h3>
    <dl class="mt-3">
      {
        posts.map(post => 
        <a href={`/posts/${post.slug}`}>
          <div class="px-4 py-2 grid grid-flow-col auto-cols-max sm:gap-2 sm:px-0">
            <dt class="text-lg font-medium leading-6">{formatDate(post.data.date)}</dt>
            <dd class="mt-1 text-lg leading-6 sm:mt-0">{post.data.title}</dd>
          </div>
        </a>
        )
      }
    </dl>
  </div>
</Base>